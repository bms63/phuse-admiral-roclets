---
title: "Time to Roclet"
subtitle: "admiralâ€™s use of custom roclets to enhance and extend examples in function documentation."
author: "Ben Straub (GSK, Philadelphia, United States)"
format:
  revealjs:
    code-block-max-height: "400px" # Makes code blocks scrollable if content exceeds this height
    scrollable: true # Enables vertical scrolling for general slide content if it overflows
editor: source
---
## Introduction: The Challenge of R Package Documentation

::: incremental
- Detailed argument definitions and inline examples aid understanding complex functions.
- In `admiral`, top-notch documentation is a priority.
- **Problem**: As examples grew, documentation became unwieldy and hard to navigate.
- **Solution**: Extended `roxygen` package's `roclets` to better display and curate examples.
- This presentation explores the technical details and positive impact on `admiral`'s function examples.
:::

## R Packages: The Foundation of R Ecosystem

::: incremental
- R packages bundle code, data, documentation, and tests in a standardized format.
- They facilitate code sharing and reuse, expanding R's functionality.
- **Key components**:
    - R functions in `R/` directory. Documentation in `man/`
    - Documentation using `roxygen2` comments.
    - Dependencies in `DESCRIPTION` file.
:::

## roxygen2: Streamlining R Documentation {.smaller}

::: incremental
- The `roxygen2` R package simplifies documentation within R packages.
- Developers write documentation directly alongside function definitions using `#'` comments.
- **Benefits**:
    - Keeps code and documentation co-located, making updates efficient.
    - Automatically generates `.Rd` files (standard R documentation) from comments.
- This system significantly reduces effort, enhancing user understanding of functions.
:::

## Anatomy of Roxygen Comments

Here's a brief example of a function `add_numbers()` with its roxygen documentation:

```r
#' Add two numbers together.
#'
#' This function takes two numeric inputs and returns their sum.
#'
#' @param x A numeric value, the first number.
#' @param y A numeric value, the second number.
#' @return The sum of `x` and `y`.
#' @examples
#' add_numbers(5, 3)
#' add_numbers(10, -2)
add_numbers <- function(x, y) {
  x + y
}
```

## Roxygenize

```r
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/add_numbers.R
\name{add_numbers}
\alias{add_numbers}
\title{Add two numbers together.}
\usage{
add_numbers(x, y)
}
\arguments{
\item{x}{A numeric value, the first number.

\describe{
\item{Default value}{none}
}}

\item{y}{A numeric value, the second number.

\describe{
\item{Default value}{none}
}}
}
\value{
The sum of \code{x} and \code{y}.
}
\description{
This function takes two numeric inputs and returns their sum.
}
\examples{
add_numbers(5, 3)
add_numbers(10, -2)
}
```

## Render on a pkgdown site or help file

![](add_2.png){width="600px"}

## dplyr

![](dplyr_ex.png){width="600px"}

## admiral 1.2

![](admiral_1_2.png){width="600px"}

## admiral 1.3

![](admiral_1_3.png){width="600px"}

## Extending roxygen

```r
#' A Demo Function
#'
#' This function is used to demonstrate the custom tags of the `rdx_roclet()`.
#'
#' @param x An argument
#' @param number A number
#' @permitted A number
#' @param letter A letter
#' @permitted [char_scalar]
#' @default The first letter of the alphabet
#' @keywords internal
#' @examplesx
#' @info This is the introduction.
#' @caption A simple example
#' @info This is a simple example showing the default behaviour.
#' @code demo_fun(1)
#' @caption An example with a different letter
#' @info This example shows that the `letter` argument does not
#'   affect the output.
#' @code demo_fun(1, letter = "b")
demo_fun <- function(x, number = 1, letter = "a") 42
```

## Eck!

```r
% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/demo_fun.R
\name{demo_fun}
\alias{demo_fun}
\title{A Demo Function}
\usage{
demo_fun(x, number = 1, letter = "a")
}

...

\keyword{internal}
\section{Examples}{

This is the introduction.
\subsection{A simple example}{

This is a simple example showing the default behaviour.

\if{html}{\out{<div class="sourceCode r">}}\preformatted{demo_fun(1)
#> [1] 42}\if{html}{\out{</div>}}}
\subsection{An example with a different letter}{

This example shows that the \code{letter} argument does not affect the output.

\if{html}{\out{<div class="sourceCode r">}}\preformatted{demo_fun(1, letter = "b")
#> [1] 42}\if{html}{\out{</div>}}}}



```
